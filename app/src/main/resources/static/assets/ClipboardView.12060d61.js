var v=Object.defineProperty;var x=(s,t,e)=>t in s?v(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var n=(s,t,e)=>(x(s,typeof t!="symbol"?t+"":t,e),e);import{aV as b,x as h,z as a,A as c,G as o,g as l,I as m,a5 as f,aY as w,r as y,C,D as g,E as S,b8 as V,a4 as k,av as I,Q as T}from"./index.0331dce9.js";import{E}from"./files.acd1afc9.js";const N="/clipboard";function q(){return new B(new WebSocket(N))}class B{constructor(t){n(this,"ws");n(this,"q");this.ws=t,this.q=[],this.ws.onmessage=e=>{const i=d.decode(e.data);this.q.forEach(_=>{_(i)})}}onMessage(t){this.q.push(t)}sendText(t){this.send(new p(t))}send(t){this.ws.send(t.encode())}}class d{constructor(t){n(this,"type");this.type=t}static decode(t){const e=JSON.parse(t);return e.type==="text"?new p(e.content):new $}encode(){return JSON.stringify(this)}}class $ extends d{constructor(){super("invalid");n(this,"type");this.type="invalid"}}class p extends d{constructor(e){super("text");n(this,"type");n(this,"content");this.type="text",this.content=e}}const D=b("clipboard",{state:()=>({clipboard:q(),list:new Array}),getters:{},actions:{init(){this.clipboard.onMessage(s=>{console.log(s),this.list.push(s)})},sendText(s){this.clipboard.sendText(s)}}}),M={class:"item"},A={class:"wrap"},J={key:0,class:"text"},O={class:"content"},z=h({__name:"ClipboardItem",props:{it:null},setup(s){const t=s;return(e,i)=>(a(),c("div",M,[o("div",A,[t.it instanceof l(p)?(a(),c("div",J,[o("div",O,m(t.it.content),1)])):f("",!0)])]))}});const F=w(z,[["__scopeId","data-v-896c9c53"]]),G={class:"clipboard"},L={class:"content"},Q={class:"send"},j=h({__name:"ClipboardView",setup(s){const t=D();t.init();const e=y(""),i=()=>{e.value!==""&&(t.sendText(e.value),e.value="")};return(_,u)=>(a(),c("div",G,[o("div",L,[C(l(E),null,{default:g(()=>[(a(!0),c(k,null,I(l(t).list,r=>(a(),T(F,{it:r},null,8,["it"]))),256))]),_:1})]),o("div",Q,[S(o("input",{type:"text","onUpdate:modelValue":u[0]||(u[0]=r=>e.value=r)},null,512),[[V,e.value]]),o("button",{onClick:i},"Send")])]))}});export{j as default};
